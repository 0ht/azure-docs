---
title: Tutorial - Dataflow from an asset to Azure Event Grid
description: Tutorial on how to set up a dataflow from an asset to Azure Event Grid.
author: PatAltimore
ms.author: patricka
ms.subservice: azure-mqtt-broker
ms.topic: tutorial
ms.date: 07/23/2024

#CustomerIntent: As an operator, I want to understand how to I can use Dataflows to .
---

# Dataflow from an asset to Azure Event Grid

In this tutorial, you will set up a dataflow from an asset to Azure Event Grid. You will configure the source to read data from an asset, the destination to send data to Azure Event Grid, and apply a transformation to the data.

1. Create the asset.
2. Create an IoT MQ endpoint.

   ```yaml
   apiVersion: connectivity.iotoperations.azure.com/v1beta1
   kind: DataflowEndpoint
   metadata:
     name: mq
   spec:
     endpointType: mqtt
     mqttSettings: {}
   ```

3. Create an Azure Event Grid endpoint.

   ```yaml
   apiVersion: connectivity.iotoperations.azure.com/v1beta1
   kind: DataflowEndpoint
   metadata:
     name: eventgrid
   spec:
     endpointType: mqtt
     authentication:
       method: systemAssignedManagedIdentity
       systemAssignedManagedIdentitySettings: {}
     mqttSettings:
       host: example.westeurope-1.ts.eventgrid.azure.net:8883
       tls:
         mode: enabled
   ```

6. Create a dataflow with the asset as the source and Azure Event Grid as the destination.

    ```yaml
    apiVersion: connectivity.iotoperations.azure.com/v1beta1
    kind: Dataflow
    metadata:
      name: to-eventgrid
    spec:
      operations:
      - operationType: source
        name: source1
        sourceSettings:
          endpointRef: mq
          dataSources:
            - <auto-generated-asset-topic>
      - operationType: destination
        name: destination1
        destinationSettings:
          endpointRef: eventgrid
          dataDestination: factory/$topic.2
    ```
