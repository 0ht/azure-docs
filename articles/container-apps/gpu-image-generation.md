---
title: Generate images using serverless GPUs in Azure Container Apps (preview)
description: Learn to run to generate images powered by serverless GPUs in Azure Container Apps.
services: container-apps
author: craigshoemaker
ms.service: azure-container-apps
ms.topic: how-to
ms.date: 10/25/2024
ms.author: cshoe
---

# Generate images using serverless GPUs in Azure Container Apps (preview)

Once you create the container app, the app can take up to five minutes to provision.

## Prerequisites

- Request access to GPUs is only available after you request GPU quotas
- Azure Container Registry: An existing Azure Container Registry instance or permissions to create one.

## Create your container app

1. Go to the Azure portal and search for and select **Container Apps**.
1. Select **Create** and then select **Container App**.
1. In the *Basics* window, enter the following values into each section.

    Under *Project details* enter the following values:

    | Setting | Value |
    |---|---|
    | Subscription | Select your Azure subscription. |
    | Resource group | **my-gpu-demo-group** TODO: regions |
    | Container app name | Enter **my-gpu-demo-app**. |
    | Deployment source | Select **Container image**. |

    Under *Container Apps environment* enter the following values:

    | Setting | Value |
    |---|---|
    | Region | Select from either West Central US... TODO: regions |
    | Container Apps environment | Select **Create new**. |

    In the *Create Container Apps environment* window, enter the following values:

    | Setting | Value |
    |---|---|
    | Environment name | Enter **my-gpu-demo-env**. |

    Select **Create**.

    Select **Next: Container >**.

1. In the *Container* window, enter the following values:

    | Setting | Value |
    |---|---|
    | Name | Enter **my-gpu-demo-container**. |
    | Image source | Select **Docker Hub or other registries**.  |
    | Image type | Select **public**. |
    | Registry login server | Enter **cappsinttestregistrypublic.azurecr.io** TODO: replace |
    | Image and tag | Enter **sd-image-gen:latest**. |
    | Workload profile | Select the option that begins with **Consumption - Up to 4**... |
    | GPU | Select the checkbox. |
    | GPU Type | Select **Conumption-GPU-NC24-A100** and select the link to add the profile to your environment. |

    Select **Next: Ingress >**.

1. In the *Ingress* window, enable ingress by selecting the **Enable** box.
1. Select **Preview + create**.

## Generate an image

1. Go to the container app in the portal.
1. From the *Overview* window, copy the **Application Url** value and set it aside for later use.
1. Open a terminal and run the following command create a variable for the application URL.

    Before you run the command, make sure to replace `<YOUR_BACKEND_URL>` with the value you copied from the portal.

    ```bash
    BACKEND_URL=<YOUR_BACKEND_URL>
    ```

1. To generate an image, run the following command to issue a `POST` request to the application.

    ```bash
    curl -X POST https://$BACKEND_URL/generate \
         -H 'Content-Type: application/json' \
         -d '{"prompt":"A majestic dragon flying over a futuristic cityscape, digital art"}' \
         -o response.json
    ```

    You should now see an image generated by your container app.

## Clean up resources

The resources created in this tutorial have an effect on your Azure bill.

If you aren't going to use these services long-term, use the steps to remove everything created in this tutorial.

1. In the Azure portal, search for and select **Resource Groups**.
1. Select **my-gpu-demo-group**.
1. Select **Delete resource group**.
1. In the confirmation box, enter **my-gpu-demo-group**.
1. Select **Delete**.

## Next steps

TODO